<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaBunny Editor</title>

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/editor.css">
    <link rel="stylesheet" href="assets/css/player.css">
    <link rel="stylesheet" href="assets/css/screenshot.css">
</head>

<body>
    <!-- Top Navigation Bar -->
    <nav class="editor-nav">
        <div class="nav-left">
            <span class="nav-brand">üé¨</span>
            <h1 class="nav-title">MediaBunny Editor</h1>
        </div>
        <div class="nav-center">
            <button class="nav-menu-btn" data-menu="file" aria-expanded="false" aria-haspopup="true">File</button>
            <button class="nav-menu-btn" data-menu="edit" aria-expanded="false" aria-haspopup="true">Edit</button>
            <button class="nav-menu-btn" data-menu="view">View</button>
            <button class="nav-menu-btn" data-menu="effects">Effects</button>
        </div>
        <div class="nav-right">
            <button class="nav-action-btn" data-action="import">üì• Import</button>
            <button class="nav-action-btn" data-menu="export" data-action="export" aria-expanded="false"
                aria-haspopup="true">üì§ Export <span class="dropdown-arrow" data-dropdown-arrow>‚ñæ</span></button>
        </div>
    </nav>

    <!-- File Menu Dropdown -->
    <div class="dropdown-menu" data-dropdown="file" role="menu" hidden>
        <button class="dropdown-menu__item" data-action="new-project" role="menuitem">
            <span class="item-icon">üìÑ</span>
            <span class="item-label">New Project</span>
            <span class="item-shortcut">Ctrl+N</span>
        </button>
        <button class="dropdown-menu__item" data-action="open-project" role="menuitem">
            <span class="item-icon">üìÇ</span>
            <span class="item-label">Open Project</span>
            <span class="item-shortcut">Ctrl+O</span>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="save" role="menuitem">
            <span class="item-icon">üíæ</span>
            <span class="item-label">Save</span>
            <span class="item-shortcut">Ctrl+S</span>
        </button>
        <button class="dropdown-menu__item" data-action="save-as" role="menuitem">
            <span class="item-icon">üíæ</span>
            <span class="item-label">Save As...</span>
            <span class="item-shortcut">Ctrl+Shift+S</span>
        </button>
    </div>

    <!-- Edit Menu Dropdown -->
    <div class="dropdown-menu" data-dropdown="edit" role="menu" hidden>
        <button class="dropdown-menu__item dropdown-menu__item--disabled" data-action="undo" data-disabled="true"
            role="menuitem" aria-disabled="true">
            <span class="item-icon">‚Ü©Ô∏è</span>
            <span class="item-label">Undo</span>
            <span class="item-shortcut">Ctrl+Z</span>
        </button>
        <button class="dropdown-menu__item dropdown-menu__item--disabled" data-action="redo" data-disabled="true"
            role="menuitem" aria-disabled="true">
            <span class="item-icon">‚Ü™Ô∏è</span>
            <span class="item-label">Redo</span>
            <span class="item-shortcut">Ctrl+Y</span>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="cut" role="menuitem">
            <span class="item-icon">‚úÇÔ∏è</span>
            <span class="item-label">Cut</span>
            <span class="item-shortcut">Ctrl+X</span>
        </button>
        <button class="dropdown-menu__item" data-action="copy" role="menuitem">
            <span class="item-icon">üìã</span>
            <span class="item-label">Copy</span>
            <span class="item-shortcut">Ctrl+C</span>
        </button>
        <button class="dropdown-menu__item" data-action="paste" role="menuitem">
            <span class="item-icon">üìÑ</span>
            <span class="item-label">Paste</span>
            <span class="item-shortcut">Ctrl+V</span>
        </button>
    </div>

    <!-- Export Menu Dropdown -->
    <div class="dropdown-menu dropdown-menu--export" data-dropdown="export" role="menu" hidden>
        <button class="dropdown-menu__item" data-action="export-video" role="menuitem">
            <span class="item-icon">üé¨</span>
            <div class="item-content">
                <span class="item-label">Export Video</span>
                <span class="item-description">Download as MP4/WebM</span>
            </div>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="export-library" role="menuitem">
            <span class="item-icon">üìö</span>
            <div class="item-content">
                <span class="item-label">Export to Library</span>
                <span class="item-description">Save to media library</span>
            </div>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="export-json" role="menuitem">
            <span class="item-icon">üìÑ</span>
            <div class="item-content">
                <span class="item-label">Export as JSON</span>
                <span class="item-description">Save project file</span>
            </div>
        </button>
    </div>

    <!-- Multi-Tab Bar -->
    <div class="tab-bar">
        <div class="tab-bar__tabs">
            <!-- Empty initially - tabs will be created dynamically in Phase 33 -->
        </div>
        <button class="tab-bar__create-btn" data-action="create-tab" aria-label="Create new tab">
            ‚ûï
        </button>
    </div>

    <!-- Main Editor Layout -->
    <div class="editor-container">
        <!-- Left Panel: Media Library (20%) -->
        <aside class="media-library-panel media-panel">
            <!-- Vertical Tabs (Phase 39) -->
            <div class="media-panel__tabs">
                <button class="media-tab active" data-media-tab="videos" role="tab" aria-selected="true">
                    <span class="media-tab__icon">üé¨</span>
                    <span class="media-tab__label">Videos</span>
                    <span class="media-tab__count">(0)</span>
                </button>
                <button class="media-tab" data-media-tab="audio" role="tab" aria-selected="false">
                    <span class="media-tab__icon">üéµ</span>
                    <span class="media-tab__label">Audio</span>
                    <span class="media-tab__count">(0)</span>
                </button>
                <button class="media-tab" data-media-tab="images" role="tab" aria-selected="false">
                    <span class="media-tab__icon">üñºÔ∏è</span>
                    <span class="media-tab__label">Images</span>
                    <span class="media-tab__count">(0)</span>
                </button>
                <button class="media-tab" data-media-tab="text" role="tab" aria-selected="false">
                    <span class="media-tab__icon">üìù</span>
                    <span class="media-tab__label">Text</span>
                    <span class="media-tab__count">(0)</span>
                </button>
                <button class="media-tab" data-media-tab="effects" role="tab" aria-selected="false">
                    <span class="media-tab__icon">‚ú®</span>
                    <span class="media-tab__label">Effects</span>
                    <span class="media-tab__count">(0)</span>
                </button>
                <button class="media-tab" data-media-tab="projects" role="tab" aria-selected="false">
                    <span class="media-tab__icon">üìÅ</span>
                    <span class="media-tab__label">Projects</span>
                    <span class="media-tab__count">(0)</span>
                </button>
            </div>

            <!-- Content Area -->
            <div class="media-panel__content">
                <!-- Search Bar -->
                <div class="media-search" role="search">
                    <span class="media-search__icon">üîç</span>
                    <input type="text" class="media-search__input" placeholder="Search media..."
                        aria-label="Search media library" data-search="media">
                    <button class="media-search__clear" aria-label="Clear search" data-action="clear-search"
                        hidden>‚úï</button>
                </div>

                <!-- Videos Content (Default Active) -->
                <div class="media-content" data-category="videos" role="tabpanel" id="videos-panel">
                    <button class="media-upload-btn" data-upload="videos" aria-label="Import videos">
                        üì• Import Videos
                    </button>
                    <p class="media-content__empty">No videos yet. Click Import Videos to get started.</p>
                </div>

                <!-- Audio Content -->
                <div class="media-content" data-category="audio" role="tabpanel" id="audio-panel" hidden>
                    <button class="media-upload-btn" data-upload="audio" aria-label="Import audio">
                        üì• Import Audio
                    </button>
                    <p class="media-content__empty">üéµ No audio files yet. Click Import Audio to add music or sounds.
                    </p>
                </div>

                <!-- Images Content -->
                <div class="media-content" data-category="images" role="tabpanel" id="images-panel" hidden>
                    <button class="media-upload-btn" data-upload="images" aria-label="Import images">
                        üì• Import Images
                    </button>
                    <p class="media-content__empty">üñºÔ∏è No images yet. Click Import Images to add photos or graphics.
                    </p>
                </div>

                <!-- Text Content -->
                <div class="media-content" data-category="text" role="tabpanel" id="text-panel" hidden>
                    <p class="media-content__empty">üìù No text overlays yet. Create text in timeline.</p>
                </div>

                <!-- Effects Content -->
                <div class="media-content" data-category="effects" role="tabpanel" id="effects-panel" hidden>
                    <p class="media-content__empty">‚ú® No effects yet. Coming soon.</p>
                </div>

                <!-- Projects Content -->
                <div class="media-content" data-category="projects" role="tabpanel" id="projects-panel" hidden>
                    <p class="media-content__empty">üìÅ No saved projects yet.</p>
                </div>
            </div>
        </aside>

        <!-- Center Panel: Preview Canvas (50%) -->
        <section class="preview-panel" aria-label="Video preview panel">
            <!-- Video Display Area (16:9) -->
            <div class="preview-panel__video">
                <!-- MediaBunny Player will be added here in Phase 49 -->
                <div class="preview-canvas" id="preview-player-container"></div>
            </div>

        </section>

        <!-- Right Panel: Properties (30%) -->
        <aside id="properties-panel" class="properties-panel">
            <div class="panel-header"
                style="padding: var(--space-md); border-bottom: 3px solid var(--border-color); font-weight: bold;">
                Properties</div>

            <!-- Empty State (Phase 55) -->
            <div id="properties-empty-state" class="properties-empty-state">
                <div class="empty-state-icon">üñ±Ô∏è</div>
                <div class="empty-state-title">No Selection</div>
                <div class="empty-state-message">Select a clip in the timeline or an item in the library to view
                    details.</div>
            </div>

            <!-- Properties Content (Phase 56) -->
            <div id="properties-content" class="properties-content" style="display: none;">
                <!-- Tab Bar -->
                <div id="properties-tab-bar" class="properties-tab-bar">
                    <button id="tab-btn-info" class="prop-tab active">
                        <span class="prop-tab-icon">‚ÑπÔ∏è</span>
                        <span class="prop-tab-label">Info</span>
                    </button>
                    <button id="tab-btn-settings" class="prop-tab">
                        <span class="prop-tab-icon">‚öôÔ∏è</span>
                        <span class="prop-tab-label">Settings</span>
                    </button>
                </div>

                <!-- Tab Content Areas -->
                <div id="tab-content-info" class="prop-tab-content active">
                    <div class="property-group">
                        <div class="group-header">File Metadata</div>

                        <div class="property-item">
                            <label class="label">Name</label>
                            <div id="info-name" class="property-value">video_01.mp4</div>
                        </div>

                        <div class="property-item">
                            <label class="label">Type</label>
                            <div id="info-type" class="property-value">Video</div>
                        </div>

                        <div class="property-item">
                            <label class="label">Duration</label>
                            <div id="info-duration" class="property-value">00:00:45</div>
                        </div>

                        <div class="property-item">
                            <label class="label">Resolution</label>
                            <div id="info-resolution" class="property-value">1920x1080</div>
                        </div>

                        <div class="property-item">
                            <label class="label">File Path</label>
                            <div id="info-path" class="property-value text-truncate" title="/imported/video_01.mp4">
                                /imported/video_01.mp4</div>
                        </div>
                    </div>
                </div>
                <div id="tab-content-settings" class="prop-tab-content">
                    <!-- Transform Section -->
                    <div class="property-group">
                        <div class="group-header">Transform</div>
                        <div class="property-item">
                            <label class="label">Position X</label>
                            <input type="number" class="prop-input" value="0" disabled>
                        </div>
                        <div class="property-item">
                            <label class="label">Position Y</label>
                            <input type="number" class="prop-input" value="0" disabled>
                        </div>
                        <div class="property-item">
                            <label class="label">Scale</label>
                            <input type="range" class="prop-slider" min="0" max="200" value="100" disabled>
                        </div>
                    </div>

                    <!-- Audio Section -->
                    <div class="property-group">
                        <div class="group-header">Audio</div>
                        <div class="property-item">
                            <label class="label">Volume</label>
                            <input type="range" class="prop-slider" min="0" max="100" value="100" disabled>
                        </div>
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Bottom Panel: Timeline Section -->
    <section class="timeline-panel">
        <!-- Timeline Header (Phase 61) -->
        <div class="timeline__header">
            <!-- Left: Spacer (since Play/Time removed) -->
            <div class="timeline__controls-left">
                <!-- Play/Time controls removed as they are in the player -->
            </div>

            <!-- Center: Zoom -->
            <div class="timeline__controls-center">
                <button id="timeline-zoom-out" class="timeline-btn" aria-label="Zoom Out"
                    data-timeline-control="zoom-out">
                    <span class="icon">üîç-</span>
                </button>
                <span id="timeline-zoom-level" class="font-mono">100%</span>
                <button id="timeline-zoom-in" class="timeline-btn" aria-label="Zoom In" data-timeline-control="zoom-in">
                    <span class="icon">üîç+</span>
                </button>
            </div>

            <!-- Right: Settings -->
            <div class="timeline__controls-right">
                <button id="timeline-settings-btn" class="timeline-btn" aria-label="Timeline Settings">
                    <span class="icon">‚öôÔ∏è</span>
                </button>
            </div>
        </div>

        <!-- Time Ruler (Phase 62-63) -->
        <div class="timeline__ruler">
            <!-- Ruler markers will be added in Phase 62 -->
        </div>

        <!-- Track Container (Phase 64) -->
        <div class="timeline-tracks" id="timeline-tracks" role="region" aria-label="Timeline tracks">
            <!-- Tracks will be added dynamically by JS -->
        </div>

        <!-- Edit Toolbar (Phase 65) -->
        <div class="timeline-toolbar" role="toolbar" aria-label="Timeline editing tools">
            <button class="toolbar-btn" data-action="cut" aria-label="Cut selected clip (Ctrl+X)" disabled>
                <span class="toolbar-btn__icon">‚úÇÔ∏è</span>
                <span class="toolbar-btn__label">Cut</span>
                <span class="toolbar-btn__shortcut">Ctrl+X</span>
            </button>
            <button class="toolbar-btn" data-action="copy" aria-label="Copy selected clip (Ctrl+C)" disabled>
                <span class="toolbar-btn__icon">üìã</span>
                <span class="toolbar-btn__label">Copy</span>
                <span class="toolbar-btn__shortcut">Ctrl+C</span>
            </button>
            <button class="toolbar-btn" data-action="paste" aria-label="Paste clip (Ctrl+V)" disabled>
                <span class="toolbar-btn__icon">üìÑ</span>
                <span class="toolbar-btn__label">Paste</span>
                <span class="toolbar-btn__shortcut">Ctrl+V</span>
            </button>
            <button class="toolbar-btn" data-action="delete" aria-label="Delete selected clip (Del)" disabled>
                <span class="toolbar-btn__icon">üóëÔ∏è</span>
                <span class="toolbar-btn__label">Delete</span>
                <span class="toolbar-btn__shortcut">Del</span>
            </button>
            <button class="toolbar-btn" data-action="undo" aria-label="Undo last action (Ctrl+Z)" disabled>
                <span class="toolbar-btn__icon">‚Ü©Ô∏è</span>
                <span class="toolbar-btn__label">Undo</span>
                <span class="toolbar-btn__shortcut">Ctrl+Z</span>
            </button>
            <button class="toolbar-btn" data-action="redo" aria-label="Redo last action (Ctrl+Y)" disabled>
                <span class="toolbar-btn__icon">‚Ü™Ô∏è</span>
                <span class="toolbar-btn__label">Redo</span>
                <span class="toolbar-btn__shortcut">Ctrl+Y</span>
            </button>
        </div>
    </section>

    <!-- Hidden file input for media import -->
    <input type="file" id="media-import-input" data-file-input="media-import"
        accept="video/*,audio/*,image/*,.mp4,.webm,.mov,.mp3,.wav,.ogg,.m4a,.jpg,.jpeg,.png,.gif,.webp" multiple hidden
        aria-label="Import media files">

    <!-- Hidden file input for video upload -->
    <input type="file" id="video-upload-input" data-file-input="video-upload" accept="video/*,.mp4,.webm,.mov,.avi,.mkv"
        multiple hidden aria-label="Select video files">

    <!-- Hidden file input for audio upload -->
    <input type="file" id="audio-upload-input" data-file-input="audio-upload"
        accept="audio/*,.mp3,.wav,.ogg,.m4a,.aac,.flac" multiple hidden aria-label="Select audio files">

    <!-- Hidden file input for image upload -->
    <input type="file" id="image-upload-input" data-file-input="image-upload"
        accept="image/*,.jpg,.jpeg,.png,.gif,.webp,.svg,.bmp" multiple hidden aria-label="Select image files">

    <!-- Notification container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Scripts -->
    <script type="module" src="assets/js/dropdown-menu.js"></script>
    <script type="module" src="assets/js/indexeddb-helper.js"></script>
    <script type="module" src="assets/js/import-handler.js"></script>
    <script type="module" src="assets/js/thumbnail-generator.js"></script>
    <script type="module" src="assets/js/preview-player.js"></script>
    <script type="module" src="assets/js/properties-panel.js"></script>
    <script type="module" src="assets/js/timeline.js"></script>
    <script type="module" src="assets/js/editor-init.js"></script>
    <script type="module" src="assets/js/media-library.js"></script>
    <script type="module" src="assets/js/storage-helper.js"></script>
    <script type="module" src="assets/js/modal-dialog.js"></script>
    <script type="module" src="assets/js/tab-manager.js"></script>
    <script type="module" src="assets/js/media-tab-manager.js"></script>
    <script type="module" src="assets/js/timeline-toolbar.js"></script>
    <script type="module" src="assets/js/clip-manager.js"></script>

</body>

</html>