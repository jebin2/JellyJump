<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MediaBunny Editor</title>

    <!-- CSS -->
    <link rel="stylesheet" href="assets/css/theme.css">
    <link rel="stylesheet" href="assets/css/editor.css">
</head>

<body>
    <!-- Top Navigation Bar -->
    <nav class="editor-nav">
        <div class="nav-left">
            <span class="nav-brand">üé¨</span>
            <h1 class="nav-title">MediaBunny Editor</h1>
        </div>
        <div class="nav-center">
            <button class="nav-menu-btn" data-menu="file" aria-expanded="false" aria-haspopup="true">File</button>
            <button class="nav-menu-btn" data-menu="edit" aria-expanded="false" aria-haspopup="true">Edit</button>
            <button class="nav-menu-btn" data-menu="view">View</button>
            <button class="nav-menu-btn" data-menu="effects">Effects</button>
        </div>
        <div class="nav-right">
            <button class="nav-action-btn" data-action="import">üì• Import</button>
            <button class="nav-action-btn" data-menu="export" data-action="export" aria-expanded="false"
                aria-haspopup="true">üì§ Export <span class="dropdown-arrow" data-dropdown-arrow>‚ñæ</span></button>
        </div>
    </nav>

    <!-- File Menu Dropdown -->
    <div class="dropdown-menu" data-dropdown="file" role="menu" hidden>
        <button class="dropdown-menu__item" data-action="new-project" role="menuitem">
            <span class="item-icon">üìÑ</span>
            <span class="item-label">New Project</span>
            <span class="item-shortcut">Ctrl+N</span>
        </button>
        <button class="dropdown-menu__item" data-action="open-project" role="menuitem">
            <span class="item-icon">üìÇ</span>
            <span class="item-label">Open Project</span>
            <span class="item-shortcut">Ctrl+O</span>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="save" role="menuitem">
            <span class="item-icon">üíæ</span>
            <span class="item-label">Save</span>
            <span class="item-shortcut">Ctrl+S</span>
        </button>
        <button class="dropdown-menu__item" data-action="save-as" role="menuitem">
            <span class="item-icon">üíæ</span>
            <span class="item-label">Save As...</span>
            <span class="item-shortcut">Ctrl+Shift+S</span>
        </button>
    </div>

    <!-- Edit Menu Dropdown -->
    <div class="dropdown-menu" data-dropdown="edit" role="menu" hidden>
        <button class="dropdown-menu__item dropdown-menu__item--disabled" data-action="undo" data-disabled="true"
            role="menuitem" aria-disabled="true">
            <span class="item-icon">‚Ü©Ô∏è</span>
            <span class="item-label">Undo</span>
            <span class="item-shortcut">Ctrl+Z</span>
        </button>
        <button class="dropdown-menu__item dropdown-menu__item--disabled" data-action="redo" data-disabled="true"
            role="menuitem" aria-disabled="true">
            <span class="item-icon">‚Ü™Ô∏è</span>
            <span class="item-label">Redo</span>
            <span class="item-shortcut">Ctrl+Y</span>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="cut" role="menuitem">
            <span class="item-icon">‚úÇÔ∏è</span>
            <span class="item-label">Cut</span>
            <span class="item-shortcut">Ctrl+X</span>
        </button>
        <button class="dropdown-menu__item" data-action="copy" role="menuitem">
            <span class="item-icon">üìã</span>
            <span class="item-label">Copy</span>
            <span class="item-shortcut">Ctrl+C</span>
        </button>
        <button class="dropdown-menu__item" data-action="paste" role="menuitem">
            <span class="item-icon">üìÑ</span>
            <span class="item-label">Paste</span>
            <span class="item-shortcut">Ctrl+V</span>
        </button>
    </div>

    <!-- Export Menu Dropdown -->
    <div class="dropdown-menu dropdown-menu--export" data-dropdown="export" role="menu" hidden>
        <button class="dropdown-menu__item" data-action="export-video" role="menuitem">
            <span class="item-icon">üé¨</span>
            <div class="item-content">
                <span class="item-label">Export Video</span>
                <span class="item-description">Download as MP4/WebM</span>
            </div>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="export-library" role="menuitem">
            <span class="item-icon">üìö</span>
            <div class="item-content">
                <span class="item-label">Export to Library</span>
                <span class="item-description">Save to media library</span>
            </div>
        </button>
        <div class="dropdown-menu__divider"></div>
        <button class="dropdown-menu__item" data-action="export-json" role="menuitem">
            <span class="item-icon">üìÑ</span>
            <div class="item-content">
                <span class="item-label">Export as JSON</span>
                <span class="item-description">Save project file</span>
            </div>
        </button>
    </div>

    <!-- Multi-Tab Bar -->
    <div class="tab-bar">
        <div class="tab-bar__tabs">
            <!-- Empty initially - tabs will be created dynamically in Phase 33 -->
        </div>
        <button class="tab-bar__create-btn" data-action="create-tab" aria-label="Create new tab">
            ‚ûï
        </button>
    </div>

    <!-- Main Editor Layout -->
    <div class="editor-container">
        <!-- Left Panel: Media Library (20%) -->
        <aside class="media-library-panel">
            <!-- Vertical Tabs -->
            <div class="vertical-tabs">
                <button class="vertical-tab active" data-tab="videos">
                    <span class="tab-icon">üìπ</span>
                    <span class="tab-label">Videos</span>
                    <span class="tab-count">12</span>
                </button>
                <button class="vertical-tab" data-tab="audio">
                    <span class="tab-icon">üéµ</span>
                    <span class="tab-label">Audio</span>
                    <span class="tab-count">5</span>
                </button>
                <button class="vertical-tab" data-tab="images">
                    <span class="tab-icon">üñºÔ∏è</span>
                    <span class="tab-label">Images</span>
                    <span class="tab-count">8</span>
                </button>
                <button class="vertical-tab" data-tab="text">
                    <span class="tab-icon">üìù</span>
                    <span class="tab-label">Text</span>
                    <span class="tab-count">0</span>
                </button>
                <button class="vertical-tab" data-tab="effects">
                    <span class="tab-icon">üé®</span>
                    <span class="tab-label">Effects</span>
                    <span class="tab-count">15</span>
                </button>
                <button class="vertical-tab" data-tab="projects">
                    <span class="tab-icon">üìÅ</span>
                    <span class="tab-label">Projects</span>
                    <span class="tab-count">3</span>
                </button>
                <button class="vertical-tab-upload">Upload</button>
            </div>

            <!-- Content Area -->
            <div class="library-content">
                <div class="library-search">
                    <input type="text" class="input" placeholder="Search videos...">
                </div>
                <div class="library-grid">
                    <div class="library-tile">
                        <div class="tile-thumbnail"></div>
                        <div class="tile-name">Video 1.mp4</div>
                    </div>
                    <div class="library-tile">
                        <div class="tile-thumbnail"></div>
                        <div class="tile-name">Video 2.mp4</div>
                    </div>
                    <div class="library-tile">
                        <div class="tile-thumbnail"></div>
                        <div class="tile-name">Video 3.mov</div>
                    </div>
                    <div class="library-tile">
                        <div class="tile-thumbnail"></div>
                        <div class="tile-name">Video 4.mp4</div>
                    </div>
                    <div class="library-tile">
                        <div class="tile-thumbnail"></div>
                        <div class="tile-name">Video 5.avi</div>
                    </div>
                    <div class="library-tile">
                        <div class="tile-thumbnail"></div>
                        <div class="tile-name">Video 6.mp4</div>
                    </div>
                </div>
            </div>
        </aside>

        <!-- Center Panel: Preview Canvas (50%) -->
        <section class="preview-panel">
            <!-- Empty container for MediaBunny Player (Phase 49) -->
            <!-- Player will provide its own controls, time display, and metadata -->
            <div id="preview-player-container" class="preview-canvas"></div>
        </section>

        <!-- Right Panel: Properties (30%) -->
        <aside class="properties-panel">
            <!-- Properties Tabs -->
            <div class="properties-tabs">
                <button class="prop-tab active">
                    <span class="prop-tab-icon">‚ÑπÔ∏è</span>
                    <span class="prop-tab-label">Info</span>
                </button>
                <button class="prop-tab">
                    <span class="prop-tab-icon">‚öôÔ∏è</span>
                    <span class="prop-tab-label">Settings</span>
                </button>
            </div>

            <!-- Info Tab Content (Visible) -->
            <div class="prop-content active" id="prop-content-info">
                <div class="property-group">
                    <div class="group-header">File Metadata</div>
                    <div class="property-item">
                        <label class="label">Name</label>
                        <div class="property-value">clip1.mp4</div>
                    </div>
                    <div class="property-item">
                        <label class="label">Duration</label>
                        <div class="property-value font-mono">00:45</div>
                    </div>
                    <div class="property-item">
                        <label class="label">Resolution</label>
                        <div class="property-value">1920x1080</div>
                    </div>
                </div>
            </div>

            <!-- Settings Tab Content (Hidden) -->
            <div class="prop-content" id="prop-content-settings" hidden>
                <div class="property-group">
                    <div class="group-header">Clip Settings</div>
                    <div class="property-item">
                        <label class="label">Opacity</label>
                        <input type="range" class="volume-slider" min="0" max="100" value="100">
                    </div>
                </div>
            </div>
        </aside>
    </div>

    <!-- Bottom Panel: Timeline Section -->
    <section class="timeline-section">
        <!-- Timeline Header -->
        <div class="timeline-header">
            <div class="timeline-label">üïê Timeline</div>
            <div class="timeline-zoom">
                <button class="zoom-btn">25%</button>
                <button class="zoom-btn active">100%</button>
                <button class="zoom-btn">200%</button>
            </div>
            <div class="timeline-duration">
                <span class="font-mono">00:00:30</span>
                <button class="timeline-settings" aria-label="Settings">‚öô</button>
            </div>
        </div>

        <!-- Time Ruler -->
        <div class="time-ruler">
            <div class="time-marker" style="left: 0%;">0:00</div>
            <div class="time-marker" style="left: 16.67%;">0:05</div>
            <div class="time-marker" style="left: 33.33%;">0:10</div>
            <div class="time-marker" style="left: 50%;">0:15</div>
            <div class="time-marker" style="left: 66.67%;">0:20</div>
            <div class="time-marker" style="left: 83.33%;">0:25</div>
            <div class="time-marker" style="left: 100%;">0:30</div>
        </div>

        <!-- Timeline Tracks -->
        <div class="timeline-tracks">
            <!-- Playhead -->
            <div class="playhead" style="left: 16.67%;"></div>

            <!-- Video Track 1 -->
            <div class="track">
                <div class="track-label">Video 1</div>
                <div class="track-content">
                    <div class="clip" style="left: 0%; width: 20%;" data-clip="v1"></div>
                    <div class="clip" style="left: 25%; width: 15%;" data-clip="v2"></div>
                    <div class="clip" style="left: 45%; width: 25%;" data-clip="v3"></div>
                </div>
            </div>

            <!-- Video Track 2 -->
            <div class="track">
                <div class="track-label">Video 2</div>
                <div class="track-content">
                    <div class="clip" style="left: 10%; width: 30%;" data-clip="v4"></div>
                </div>
            </div>

            <!-- Audio Track -->
            <div class="track">
                <div class="track-label">Audio</div>
                <div class="track-content">
                    <div class="clip audio-clip" style="left: 0%; width: 60%;" data-clip="a1">
                        <div class="waveform"> ‚ñÉ‚ñÖ‚ñá‚ñÖ‚ñÉ ‚ñÉ‚ñÖ‚ñá‚ñÖ‚ñÉ ‚ñÉ‚ñÖ‚ñá‚ñÖ‚ñÉ ‚ñÉ‚ñÖ‚ñá‚ñÖ‚ñÉ ‚ñÉ‚ñÖ‚ñá‚ñÖ‚ñÉ </div>
                    </div>
                </div>
            </div>

            <!-- Text Track -->
            <div class="track">
                <div class="track-label">Text</div>
                <div class="track-content">
                    <div class="clip text-clip" style="left: 20%; width: 15%;" data-clip="t1">Hello World</div>
                </div>
            </div>
        </div>

        <!-- Edit Toolbar -->
        <div class="timeline-toolbar">
            <button class="toolbar-btn" aria-label="Cut">‚úÇÔ∏è Cut</button>
            <button class="toolbar-btn" aria-label="Trim">üìè Trim</button>
            <button class="toolbar-btn" aria-label="Split">‚ûï Split</button>
            <button class="toolbar-btn" aria-label="Copy">üìã Copy</button>
            <button class="toolbar-btn" aria-label="Paste">üìÑ Paste</button>
            <button class="toolbar-btn" aria-label="Delete">üóëÔ∏è Delete</button>
            <button class="toolbar-btn" aria-label="Undo">üîÑ Undo</button>
            <button class="toolbar-btn" aria-label="Redo">‚Ü©Ô∏è Redo</button>
        </div>
    </section>

    <!-- Hidden file input for media import -->
    <input type="file" id="media-import-input" data-file-input="media-import"
        accept="video/*,audio/*,image/*,.mp4,.webm,.mov,.mp3,.wav,.ogg,.m4a,.jpg,.jpeg,.png,.gif,.webp" multiple hidden
        aria-label="Import media files">

    <!-- Notification container -->
    <div id="notification-container" class="notification-container"></div>

    <!-- Scripts -->
    <script type="module" src="assets/js/dropdown-menu.js"></script>
    <script type="module" src="assets/js/indexeddb-helper.js"></script>
    <script type="module" src="assets/js/import-handler.js"></script>
    <script type="module" src="assets/js/media-library.js"></script>
    <script type="module" src="assets/js/modal-dialog.js"></script>
    <script type="module" src="assets/js/tab-manager.js"></script>

</body>

</html>