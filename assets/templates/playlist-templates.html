<!-- Playlist Templates -->
<!-- All HTML templates for the playlist component -->
<!-- These are cloned and populated with data in Playlist.js -->

<!-- Playlist Item Template -->
<template id="playlist-item-template">
    <div class="playlist-item" data-index="" tabindex="0" role="button">
        <div class="playlist-thumbnail"></div>
        <div class="playlist-info">
            <div class="playlist-title"></div>
            <div class="playlist-duration"></div>
        </div>
        <div class="playlist-actions">
            <button class="playlist-download-btn" title="Download video" aria-label="Download">
                <svg width="16" height="16" fill="currentColor">
                    <use href="assets/icons/sprite.svg#icon-download"></use>
                </svg>
            </button>
            <button class="playlist-remove-btn" title="Remove" aria-label="Remove">
                <svg width="16" height="16" fill="currentColor">
                    <use href="assets/icons/sprite.svg#icon-trash"></use>
                </svg>
            </button>
            <button class="playlist-settings-btn" title="Video Options" aria-label="Video options menu">
                <svg width="16" height="16" fill="currentColor">
                    <use href="assets/icons/sprite.svg#icon-more-vertical"></use>
                </svg>
            </button>
        </div>
    </div>
</template>

<!-- Playlist Settings Menu Template -->
<template id="playlist-settings-menu-template">
    <div class="playlist-context-menu" role="menu">
        <div class="playlist-menu-item" data-action="convert" role="menuitem">
            <span class="menu-icon">üîÑ</span>
            <span class="menu-label">Convert Format...</span>
        </div>
        <div class="playlist-menu-item" data-action="download-manage" role="menuitem">
            <span class="menu-icon">üé¨</span>
            <span class="menu-label">Download/Manage Tracks...</span>
        </div>
        <div class="menu-divider"></div>
        <div class="playlist-menu-item" data-action="trim" role="menuitem">
            <span class="menu-icon">‚úÇÔ∏è</span>
            <span class="menu-label">Trim Video...</span>
        </div>
        <div class="playlist-menu-item" data-action="resize" role="menuitem">
            <span class="menu-icon">üìê</span>
            <span class="menu-label">Resize Video...</span>
        </div>
        <div class="playlist-menu-item" data-action="create-gif" role="menuitem">
            <span class="menu-icon">üéûÔ∏è</span>
            <span class="menu-label">Create GIF...</span>
        </div>
        <div class="menu-divider"></div>
        <div class="playlist-menu-item" data-action="info" role="menuitem">
            <div class="menu-icon">
                <svg width="16" height="16" fill="currentColor">
                    <use href="assets/icons/sprite.svg#icon-info"></use>
                </svg>
            </div>
            <span class="menu-label">Video Info</span>
        </div>
        <div class="playlist-menu-item" data-action="merge" role="menuitem">
            <span class="menu-icon">üîó</span>
            <span class="menu-label">Merge Videos...</span>
        </div>
    </div>
</template>

<!-- Modal Shell Template -->
<template id="modal-shell-template">
    <div class="mb-modal-overlay">
        <div class="mb-modal" role="dialog" aria-modal="true">
            <div class="mb-modal-header">
                <h3 class="mb-modal-title"></h3>
                <button class="mb-modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="mb-modal-body" style="max-height: 70vh; overflow-y: auto;"></div>
            <div class="mb-modal-footer hidden"></div>
        </div>
    </div>
</template>

<!-- Conversion Modal Template -->
<template id="conversion-modal-template">
    <div class="mb-modal-overlay">
        <div class="mb-modal conversion-modal" role="dialog" aria-labelledby="conversion-modal-title" aria-modal="true">
            <div class="mb-modal-header">
                <h3 id="conversion-modal-title" class="mb-modal-title">Convert & Optimize Video</h3>
                <button class="mb-modal-close" aria-label="Close modal">&times;</button>
            </div>

            <div class="mb-modal-body" style="max-height: 70vh; overflow-y: auto;">
                <div class="source-info mb-md">
                    <span class="text-secondary text-sm font-mono">SOURCE:</span>
                    <div class="source-filename text-base font-bold truncate" title=""></div>
                </div>

                <!-- Format Selection -->
                <div class="format-selection mb-lg">
                    <div class="text-secondary text-sm font-mono mb-sm">SELECT FORMAT:</div>
                    <div class="radio-group format-group" role="radiogroup">
                        <!-- Keep Original -->
                        <label class="radio-option">
                            <input type="radio" name="format" value="keep" checked>
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">Original</span>
                                <span class="format-desc">Keep Format</span>
                            </div>
                        </label>

                        <!-- Supported Formats -->
                        <label class="radio-option">
                            <input type="radio" name="format" value="mp4">
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">MP4</span>
                                <span class="format-desc">H.264 / AAC</span>
                            </div>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="format" value="webm">
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">WebM</span>
                                <span class="format-desc">VP9 / Opus</span>
                            </div>
                        </label>
                        <label class="radio-option">
                            <input type="radio" name="format" value="mov">
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">MOV</span>
                                <span class="format-desc">QuickTime</span>
                            </div>
                        </label>

                        <!-- Disabled Formats -->
                        <label class="radio-option disabled" title="Coming Soon">
                            <input type="radio" name="format" value="avi" disabled>
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">AVI</span>
                                <span class="format-desc">Legacy</span>
                            </div>
                        </label>
                        <label class="radio-option disabled" title="Coming Soon">
                            <input type="radio" name="format" value="mkv" disabled>
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">MKV</span>
                                <span class="format-desc">Matroska</span>
                            </div>
                        </label>
                        <label class="radio-option disabled" title="Coming Soon">
                            <input type="radio" name="format" value="flv" disabled>
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">FLV</span>
                                <span class="format-desc">Flash</span>
                            </div>
                        </label>
                        <label class="radio-option disabled" title="Coming Soon">
                            <input type="radio" name="format" value="wmv" disabled>
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">WMV</span>
                                <span class="format-desc">Windows</span>
                            </div>
                        </label>
                        <label class="radio-option disabled" title="Coming Soon">
                            <input type="radio" name="format" value="mpeg" disabled>
                            <span class="radio-custom"></span>
                            <div class="radio-label">
                                <span class="format-name">MPEG</span>
                                <span class="format-desc">Classic</span>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Quality Slider (Always Visible) -->
                <div class="quality-section mb-lg">
                    <div class="flex-between mb-sm">
                        <span class="text-secondary text-sm font-mono">QUALITY:</span>
                        <span class="quality-value text-sm font-bold">Original (100%)</span>
                    </div>
                    <input type="range" class="quality-slider" min="40" max="100" step="20" value="100">
                    <div class="flex-between mt-xs text-xs text-secondary">
                        <span>Low</span>
                        <span>Medium</span>
                        <span>High</span>
                        <span>Original</span>
                    </div>
                    <div class="estimated-reduction text-xs text-accent mt-sm">No size reduction</div>
                </div>

                <div class="options-group mb-lg">
                    <label class="checkbox-option">
                        <input type="checkbox" name="addToPlaylist" checked>
                        <span class="checkbox-custom"></span>
                        <span class="checkbox-label">Add to playlist after conversion</span>
                    </label>
                </div>

                <!-- Progress Section (Hidden by default) -->
                <div class="progress-section hidden">
                    <div class="flex-between mb-xs">
                        <span class="progress-status text-sm font-mono">Processing...</span>
                        <span class="progress-percentage text-sm font-bold">0%</span>
                    </div>
                    <div class="progress-bar-container">
                        <div class="progress-bar-fill" style="width: 0%"></div>
                    </div>
                </div>

                <!-- Error Message (Hidden by default) -->
                <div class="error-message hidden mt-md p-sm border-danger text-danger text-sm"></div>

                <!-- Success Message (Hidden by default) -->
                <div class="success-message hidden mt-md p-sm border-success text-success text-sm">
                    Operation complete!
                </div>
            </div>

            <div class="mb-modal-footer">
                <div class="action-buttons flex gap-sm">
                    <a href="#" class="btn jellyjump-btn-small hidden download-btn" title="Download"
                        aria-label="Download" download>
                        <svg width="16" height="16" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-download"></use>
                        </svg>
                    </a>
                    <button class="btn jellyjump-btn-small convert-btn" title="Convert" aria-label="Convert">
                        <svg width="16" height="16" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-convert"></use>
                        </svg>
                    </button>
                </div>
            </div>
        </div>
    </div>
</template>

<!-- Conversion Content Template -->
<template id="conversion-content-template">
    <div class="source-info mb-md">
        <span class="text-secondary text-sm font-mono">SOURCE:</span>
        <div class="source-filename text-base font-bold truncate" title=""></div>
    </div>

    <!-- Format Selection -->
    <div class="format-selection mb-lg">
        <div class="text-secondary text-sm font-mono mb-sm">SELECT FORMAT:</div>
        <div class="radio-group format-group" role="radiogroup">
            <!-- Keep Original -->
            <label class="radio-option">
                <input type="radio" name="format" value="keep" checked>
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">Original</span>
                    <span class="format-desc">Keep Format</span>
                </div>
            </label>

            <!-- Supported Formats -->
            <label class="radio-option">
                <input type="radio" name="format" value="mp4">
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">MP4</span>
                    <span class="format-desc">H.264 / AAC</span>
                </div>
            </label>
            <label class="radio-option">
                <input type="radio" name="format" value="webm">
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">WebM</span>
                    <span class="format-desc">VP9 / Opus</span>
                </div>
            </label>
            <label class="radio-option">
                <input type="radio" name="format" value="mov">
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">MOV</span>
                    <span class="format-desc">QuickTime</span>
                </div>
            </label>

            <!-- Disabled Formats -->
            <label class="radio-option disabled" title="Coming Soon">
                <input type="radio" name="format" value="avi" disabled>
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">AVI</span>
                    <span class="format-desc">Legacy</span>
                </div>
            </label>
            <label class="radio-option disabled" title="Coming Soon">
                <input type="radio" name="format" value="mkv" disabled>
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">MKV</span>
                    <span class="format-desc">Matroska</span>
                </div>
            </label>
            <label class="radio-option disabled" title="Coming Soon">
                <input type="radio" name="format" value="flv" disabled>
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">FLV</span>
                    <span class="format-desc">Flash</span>
                </div>
            </label>
            <label class="radio-option disabled" title="Coming Soon">
                <input type="radio" name="format" value="wmv" disabled>
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">WMV</span>
                    <span class="format-desc">Windows</span>
                </div>
            </label>
            <label class="radio-option disabled" title="Coming Soon">
                <input type="radio" name="format" value="mpeg" disabled>
                <span class="radio-custom"></span>
                <div class="radio-label">
                    <span class="format-name">MPEG</span>
                    <span class="format-desc">Classic</span>
                </div>
            </label>
        </div>
    </div>

    <!-- Quality Slider (Always Visible) -->
    <div class="quality-section mb-lg">
        <div class="flex-between mb-sm">
            <span class="text-secondary text-sm font-mono">QUALITY:</span>
            <span class="quality-value text-sm font-bold">Original (100%)</span>
        </div>
        <input type="range" class="quality-slider" min="40" max="100" step="20" value="100">
        <div class="flex-between mt-xs text-xs text-secondary">
            <span>Low</span>
            <span>Medium</span>
            <span>High</span>
            <span>Original</span>
        </div>
        <div class="estimated-reduction text-xs text-accent mt-sm">No size reduction</div>
    </div>

    <div class="options-group mb-lg">
        <label class="checkbox-option">
            <input type="checkbox" name="addToPlaylist" checked>
            <span class="checkbox-custom"></span>
            <span class="checkbox-label">Add to playlist after conversion</span>
        </label>
    </div>

    <!-- Progress Section (Hidden by default) -->
    <div class="progress-section hidden">
        <div class="flex-between mb-xs">
            <span class="progress-status text-sm font-mono">Processing...</span>
            <span class="progress-percentage text-sm font-bold">0%</span>
        </div>
        <div class="progress-bar-container">
            <div class="progress-bar-fill" style="width: 0%"></div>
        </div>
    </div>

    <!-- Error Message (Hidden by default) -->
    <div class="error-message hidden mt-md p-sm border-danger text-danger text-sm"></div>

    <!-- Success Message (Hidden by default) -->
    <div class="success-message hidden mt-md p-sm border-success text-success text-sm">
        Operation complete!
    </div>
</template>

<!-- Conversion Footer Template -->
<template id="conversion-footer-template">
    <div class="action-buttons flex gap-sm">
        <a href="#" class="btn jellyjump-btn-small hidden download-btn" title="Download" aria-label="Download" download>
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-download"></use>
            </svg>
        </a>
        <button class="btn jellyjump-btn-small convert-btn" title="Convert" aria-label="Convert">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-convert"></use>
            </svg>
        </button>
    </div>
</template>

<!-- Folder Header Template -->
<template id="playlist-folder-header-template">
    <div class="playlist-folder-header">
        <div class="playlist-folder-info">
            <span class="playlist-toggle">‚ñ∂</span>
            <span class="folder-icon">üìÅ</span>
            <span class="folder-name"></span>
        </div>
        <button class="playlist-remove-btn folder-remove-btn" title="Remove Folder" aria-label="Remove folder">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-trash"></use>
            </svg>
        </button>
    </div>
</template>

<!-- Empty Playlist Template -->
<template id="playlist-empty-template">
    <div class="playlist-placeholder">
        <p>No videos in playlist.</p>
    </div>
</template>

<!-- Playlist Header Controls Template -->
<template id="playlist-header-controls-template">
    <div class="playlist-header-top">
        <div class="playlist-title-text">Playlist</div>
        <button class="sidebar-collapse-btn" id="sidebar-toggle-btn" aria-label="Collapse sidebar" aria-expanded="true"
            title="Collapse sidebar (Ctrl+B)">
            ‚ñ∂
        </button>
    </div>
    <div class="playlist-controls">
        <button class="jellyjump-btn-small" id="mb-add-files" title="Add Files">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-plus"></use>
            </svg>
        </button>
        <button class="jellyjump-btn-small" id="mb-add-folder" title="Add Folder">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-folder"></use>
            </svg>
        </button>
        <button class="jellyjump-btn-small" id="mb-add-url" title="Add from URL">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-link"></use>
            </svg>
        </button>
        <button class="jellyjump-btn-small" id="mb-clear-playlist" title="Clear Playlist">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-trash"></use>
            </svg>
        </button>
    </div>
</template>

<!-- Video Placeholder SVG Template -->
<template id="video-placeholder-template">
    <svg width="24" height="24" fill="#666">
        <use href="assets/icons/sprite.svg#icon-video-placeholder"></use>
    </svg>
</template>

<!-- Loading Spinner Template -->
<template id="loading-spinner-template">
    <svg width="16" height="16" fill="currentColor" class="spinner-rotate">
        <use href="assets/icons/sprite.svg#icon-loading"></use>
    </svg>
</template>

<!-- Missing File Status Text Template -->
<template id="missing-file-status-template">
    <span style="color: var(--error-color); font-size: 0.7em;"> (Missing File)</span>
</template>

<!-- URL Upload Modal Template -->
<!-- URL Upload Content Template -->
<template id="url-upload-content-template">
    <div class="mb-input-group">
        <label for="url-input">Video URL</label>
        <input type="url" id="url-input" placeholder="https://example.com/video.mp4" class="mb-input">
    </div>
    <div class="mb-modal-error" style="display: none;"></div>
    <div class="mb-modal-loading" style="display: none;">
        <svg width="16" height="16" fill="currentColor" class="spinner-rotate">
            <use href="assets/icons/sprite.svg#icon-loading"></use>
        </svg>
        <span>Fetching video...</span>
    </div>
</template>

<!-- URL Upload Footer Template -->
<template id="url-upload-footer-template">
    <button class="jellyjump-btn-secondary mb-modal-cancel">Cancel</button>
    <button class="jellyjump-btn-primary mb-modal-add" disabled>Add Video</button>
</template>

<!-- Trim Content Template -->
<template id="trim-content-template">
    <div class="source-info mb-md">
        <span class="text-secondary text-sm font-mono">SOURCE:</span>
        <div class="source-filename text-base font-bold truncate" title=""></div>
    </div>

    <!-- Loading State -->
    <div class="trim-loading flex flex-col items-center justify-center p-xl text-muted">
        <div class="spinner-md border-4 border-current border-t-transparent rounded-full w-8 h-8 animate-spin mb-sm">
        </div>
        <span>Loading video info...</span>
    </div>

    <div class="trim-content hidden">
        <!-- Player Container -->
        <div id="trim-player-container" class="mb-lg aspect-video bg-black rounded overflow-hidden relative"></div>

        <!-- Time Inputs -->
        <div class="time-inputs-container mb-lg"
            style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 4px; align-items: end;">
            <div class="time-input-group" style="min-width: 0;">
                <label for="trim-start-input" class="text-xs text-secondary font-mono mb-xs block">START</label>
                <input type="text" id="trim-start-input" class="mb-input font-mono text-center"
                    style="width: 100%; padding: 8px 4px; font-size: 0.9em;" placeholder="00:00:00" value="00:00:00">
            </div>
            <div class="duration-display flex flex-col items-center justify-center" style="padding: 0 4px;">
                <span class="text-xs text-secondary font-mono">DUR</span>
                <span class="trim-duration text-sm font-bold text-accent">00:00:00</span>
            </div>
            <div class="time-input-group" style="min-width: 0;">
                <label for="trim-end-input" class="text-xs text-secondary font-mono mb-xs block">END</label>
                <input type="text" id="trim-end-input" class="mb-input font-mono text-center"
                    style="width: 100%; padding: 8px 4px; font-size: 0.9em;" placeholder="00:00:00" value="00:00:00">
            </div>
        </div>

        <!-- Visual Timeline Slider -->
        <div class="timeline-slider-container mb-lg select-none">
            <div class="timeline-slider relative h-12 bg-tertiary rounded cursor-pointer">
                <!-- Track Background -->
                <div class="timeline-track absolute inset-0 rounded overflow-hidden">
                    <!-- Ticks generated by JS -->
                </div>
                <!-- Selected Range -->
                <div class="timeline-range absolute top-0 bottom-0 bg-primary opacity-30 pointer-events-none"
                    style="left: 0%; width: 100%;"></div>
                <!-- Handles -->
                <div class="timeline-handle start-handle absolute top-0 bottom-0 w-4 bg-accent cursor-ew-resize z-10 -ml-2 rounded-full border-2 border-white shadow-md"
                    style="left: 0%;" tabindex="0" role="slider" aria-label="Start time"></div>
                <div class="timeline-handle end-handle absolute top-0 bottom-0 w-4 bg-accent cursor-ew-resize z-10 -ml-2 rounded-full border-2 border-white shadow-md"
                    style="left: 100%;" tabindex="0" role="slider" aria-label="End time"></div>
            </div>
            <div class="flex-between mt-xs text-xs text-secondary font-mono">
                <span>00:00</span>
                <span class="total-duration">00:00</span>
            </div>
        </div>



        <div class="options-group mb-lg">
            <label class="checkbox-option">
                <input type="checkbox" name="addToPlaylist" checked>
                <span class="checkbox-custom"></span>
                <span class="checkbox-label">Add to playlist after trimming</span>
            </label>
        </div>

        <!-- Progress Section (Hidden by default) -->
        <div class="progress-section hidden">
            <div class="flex-between mb-xs">
                <span class="progress-status text-sm font-mono">Trimming video...</span>
                <span class="progress-percentage text-sm font-bold">0%</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar-fill" style="width: 0%"></div>
            </div>
        </div>

        <!-- Error Message (Hidden by default) -->
        <div class="error-message hidden mt-md p-sm border-danger text-danger text-sm"></div>

        <!-- Success Message (Hidden by default) -->
        <div class="success-message hidden mt-md p-sm border-success text-success text-sm">
            Trimming complete!
        </div>
    </div>
</template>

<!-- Trim Footer Template -->
<template id="trim-footer-template">
    <div class="action-buttons flex gap-sm">
        <a href="#" class="btn jellyjump-btn-small hidden download-btn" title="Download" aria-label="Download" download>
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-download"></use>
            </svg>
        </a>
        <button class="btn jellyjump-btn-small trim-btn" title="Trim" aria-label="Trim">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-scissors"></use>
            </svg>
        </button>
    </div>
</template>

<!-- Track Management Modal Template -->
<template id="track-management-modal-template">
    <div class="mb-modal-overlay">
        <div class="mb-modal" style="max-width: 700px;" role="dialog" aria-modal="true">
            <div class="mb-modal-header">
                <h3 class="mb-modal-title">Video & Audio Tracks</h3>
                <button class="mb-modal-close" aria-label="Close">&times;</button>
            </div>
            <div class="mb-modal-body" style="max-height: 70vh; overflow-y: auto;">
                <div class="source-filename text-sm text-muted mb-md font-mono break-all"></div>

                <!-- Loading State -->
                <div class="tracks-loading flex flex-col items-center justify-center p-xl text-muted">
                    <div
                        class="spinner-md border-4 border-current border-t-transparent rounded-full w-8 h-8 animate-spin mb-sm">
                    </div>
                    <span>Scanning media tracks...</span>
                </div>

                <div class="tracks-content hidden">
                    <div class="track-section video-tracks-section">
                        <h4 class="track-section-title flex items-center gap-sm mb-sm font-bold">
                            <span>üìπ Video Tracks</span>
                            <span class="track-count badge bg-primary text-white text-xs px-xs rounded-full">0</span>
                        </h4>
                        <div class="track-list video-track-list grid gap-sm">
                            <!-- Video tracks injected here -->
                            <div class="no-tracks-message text-muted text-sm italic hidden">No video tracks available
                            </div>
                        </div>
                    </div>

                    <div class="track-section audio-tracks-section mt-lg">
                        <h4 class="track-section-title flex items-center gap-sm mb-sm font-bold">
                            <span>üéµ Audio Tracks</span>
                            <span class="track-count badge bg-primary text-white text-xs px-xs rounded-full">0</span>
                        </h4>
                        <div class="track-list audio-track-list grid gap-sm">
                            <!-- Audio tracks injected here -->
                            <div class="no-tracks-message text-muted text-sm italic hidden">No audio tracks available
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</template>

<!-- Track Management Content Template -->
<template id="track-management-content-template">
    <div class="source-filename text-sm text-muted mb-md font-mono break-all"></div>

    <!-- Loading State -->
    <div class="tracks-loading flex flex-col items-center justify-center p-xl text-muted">
        <div class="spinner-md border-4 border-current border-t-transparent rounded-full w-8 h-8 animate-spin mb-sm">
        </div>
        <span>Scanning media tracks...</span>
    </div>

    <div class="tracks-content hidden">
        <div class="track-section video-tracks-section">
            <h4 class="track-section-title flex items-center gap-sm mb-sm font-bold">
                <span>üìπ Video Tracks</span>
                <span class="track-count badge bg-primary text-white text-xs px-xs rounded-full">0</span>
            </h4>
            <div class="track-list video-track-list grid gap-sm">
                <!-- Video tracks injected here -->
                <div class="no-tracks-message text-muted text-sm italic hidden">No video tracks available
                </div>
            </div>
        </div>

        <div class="track-section audio-tracks-section mt-lg">
            <h4 class="track-section-title flex items-center gap-sm mb-sm font-bold">
                <span>üéµ Audio Tracks</span>
                <span class="track-count badge bg-primary text-white text-xs px-xs rounded-full">0</span>
            </h4>
            <div class="track-list audio-track-list grid gap-sm">
                <!-- Audio tracks injected here -->
                <div class="no-tracks-message text-muted text-sm italic hidden">No audio tracks available
                </div>
            </div>
        </div>
    </div>
</template>

<!-- Track Card Template -->
<template id="track-card-template">
    <div class="track-card border border-border rounded p-sm bg-secondary hover:bg-tertiary transition-colors">
        <div class="flex justify-between items-start gap-md">
            <div class="track-info flex-1">
                <div class="track-title font-bold text-md mb-xs">Track #<span class="track-index">1</span></div>
                <div class="track-metadata text-sm text-muted grid gap-xs">
                    <div class="meta-item"><span class="meta-label font-semibold">Codec:</span> <span
                            class="meta-codec font-mono"></span></div>
                    <div class="meta-item"><span class="meta-label font-semibold">Details:</span> <span
                            class="meta-details"></span></div>
                    <div class="meta-item"><span class="meta-label font-semibold">Language:</span> <span
                            class="meta-language"></span></div>
                </div>
            </div>
            <div class="track-actions flex flex-col gap-sm items-end shrink-0">
                <button class="btn jellyjump-btn-small download-track-btn flex items-center gap-xs"
                    title="Download Track">
                    <svg width="16" height="16" fill="currentColor">
                        <use href="assets/icons/sprite.svg#icon-download"></use>
                    </svg>
                </button>
                <button class="btn jellyjump-btn-small add-to-playlist-btn flex items-center gap-xs"
                    title="Add to Playlist">
                    <svg width="16" height="16" fill="currentColor">
                        <use href="assets/icons/sprite.svg#icon-plus"></use>
                    </svg>
                </button>
                <div class="progress-container hidden flex items-center gap-xs text-primary">
                    <div
                        class="spinner-sm border-2 border-current border-t-transparent rounded-full w-4 h-4 animate-spin">
                    </div>
                    <span class="text-xs font-bold">Extracting...</span>
                </div>
            </div>
        </div>
    </div>
</template><!-- Resize Content Template -->
<template id="resize-content-template">
    <div class="source-info mb-lg p-sm bg-tertiary rounded flex-between items-center">
        <div class="flex flex-col">
            <span class="text-xs text-secondary font-mono">CURRENT RESOLUTION</span>
            <span class="current-resolution text-sm font-bold text-primary">Checking...</span>
        </div>
        <div class="flex flex-col items-end">
            <span class="text-xs text-secondary font-mono">ASPECT RATIO</span>
            <span class="current-aspect-ratio text-sm font-bold text-accent">--:--</span>
        </div>
    </div>

    <!-- Dimension Inputs -->
    <div class="dimension-inputs-container mb-lg"
        style="display: grid; grid-template-columns: 1fr auto 1fr; gap: 10px; align-items: end;">
        <div class="input-group" style="min-width: 0;">
            <label for="resize-width" class="text-xs text-secondary font-mono mb-xs block">WIDTH (px)</label>
            <input type="number" id="resize-width" class="mb-input font-mono text-center" style="width: 100%;"
                placeholder="1920" min="128" max="7680" step="2">
        </div>
        <div class="aspect-lock-container flex flex-col items-center justify-end">
            <button class="aspect-lock-btn btn jellyjump-btn-primary p-xs rounded" title="Lock Aspect Ratio"
                aria-pressed="true"
                style="margin-bottom: 10px;display: flex; align-items: center; justify-content: center;">
                <svg width="20" height="20" fill="currentColor">
                    <use href="assets/icons/sprite.svg#icon-link"></use>
                </svg>
            </button>
        </div>
        <div class="input-group" style="min-width: 0;">
            <label for="resize-height" class="text-xs text-secondary font-mono mb-xs block">HEIGHT (px)</label>
            <input type="number" id="resize-height" class="mb-input font-mono text-center" style="width: 100%;"
                placeholder="1080" min="128" max="7680" step="2">
        </div>
    </div>

    <!-- Presets -->
    <div class="presets-container mb-lg">
        <label class="text-xs text-secondary font-mono mb-xs block">PRESETS</label>
        <div class="presets-grid" style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 8px;">
            <button class="btn jellyjump-btn-secondary preset-btn" data-preset="1080p">1080p (FHD)</button>
            <button class="btn jellyjump-btn-secondary preset-btn" data-preset="720p">720p (HD)</button>
            <button class="btn jellyjump-btn-secondary preset-btn" data-preset="480p">480p (SD)</button>
            <button class="btn jellyjump-btn-secondary preset-btn" data-preset="360p">360p</button>
        </div>
    </div>

    <div class="options-group mb-lg">
        <label class="checkbox-option flex items-center gap-sm cursor-pointer select-none">
            <input type="checkbox" name="addToPlaylist" checked class="accent-primary">
            <span class="text-sm">Add to playlist after resizing</span>
        </label>
    </div>

    <!-- Progress Section (Hidden by default) -->
    <div class="resize-progress hidden">
        <div class="flex-between mb-xs">
            <span class="status-text text-sm font-mono">Resizing video...</span>
            <span class="progress-percentage text-sm font-bold">0%</span>
        </div>
        <div class="progress-bar-container">
            <div class="progress-bar-fill" style="width: 0%"></div>
        </div>
    </div>

    <!-- Error Message (Hidden by default) -->
    <div class="resize-error hidden mt-md p-sm border-danger text-danger text-sm"></div>

    <!-- Success Message (Hidden by default) -->
    <div class="resize-success hidden mt-md p-sm border-success text-success text-sm">
        Resize complete!
    </div>
</template>

<!-- Resize Footer Template -->
<template id="resize-footer-template">
    <div class="action-buttons flex gap-sm">
        <a href="#" class="btn jellyjump-btn-small hidden download-btn" title="Download" aria-label="Download" download>
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-download"></use>
            </svg>
        </a>
        <button class="btn jellyjump-btn-small resize-btn" title="Resize" aria-label="Resize">
            <svg width="16" height="16" fill="currentColor">
                <use href="assets/icons/sprite.svg#icon-convert"></use>
            </svg>
        </button>
    </div>
</template>
<button class="btn jellyjump-btn-small resize-btn" title="Resize" aria-label="Resize">
    <span class="font-bold">Resize</span>
</button>
</div>
</template>

<template id="info-content-template">
    <div class="info-modal-content flex flex-col gap-md">
        <!-- File Properties -->
        <div class="info-section">
            <h3 class="text-accent text-sm font-bold uppercase mb-sm border-b border-dark pb-xs">File Properties</h3>
            <div class="info-grid grid grid-cols-2 gap-x-md gap-y-sm text-sm">
                <div class="text-secondary">Filename</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="filename">video.mp4</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="filename">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Format</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="format">MP4</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="format">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">MIME Type</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="mimeType">video/mp4</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="mimeType">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Size</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="size">12.5 MB</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="size">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Duration</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="duration">00:05:23</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="duration">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Video Stream -->
        <div class="info-section">
            <h3 class="text-accent text-sm font-bold uppercase mb-sm border-b border-dark pb-xs">Video Stream</h3>
            <div class="info-grid grid grid-cols-2 gap-x-md gap-y-sm text-sm">
                <div class="text-secondary">Codec</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="videoCodec">H.264</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="videoCodec">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Codec String</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="videoCodecString">avc1.4d401f</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="videoCodecString">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Resolution</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="resolution">1920x1080</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="resolution">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Coded Resolution</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="codedResolution">1920x1088</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="codedResolution">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Frame Rate</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="fps">30 fps</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="fps">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Bitrate</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="videoBitrate">5.2 Mbps</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="videoBitrate">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Rotation</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="rotation">0¬∞</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="rotation">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">HDR</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="hdr">No</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="hdr">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Audio Stream -->
        <div class="info-section">
            <h3 class="text-accent text-sm font-bold uppercase mb-sm border-b border-dark pb-xs">Audio Stream</h3>
            <div class="info-grid grid grid-cols-2 gap-x-md gap-y-sm text-sm">
                <div class="text-secondary">Codec</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="audioCodec">AAC</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="audioCodec">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Codec String</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="audioCodecString">mp4a.40.2</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="audioCodecString">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Channels</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="channels">Stereo (2)</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="channels">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Sample Rate</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="sampleRate">48 kHz</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="sampleRate">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>

                <div class="text-secondary">Language</div>
                <div class="text-primary font-bold text-right flex items-center justify-end gap-xs group">
                    <span class="info-value" data-key="language">English (eng)</span>
                    <button class="copy-btn btn-icon-small opacity-0 group-hover:opacity-100 transition-opacity"
                        title="Copy" data-copy="language">
                        <svg width="12" height="12" fill="currentColor">
                            <use href="assets/icons/sprite.svg#icon-copy"></use>
                        </svg>
                    </button>
                </div>
            </div>
        </div>

        <div class="flex justify-end mt-md">
            <button class="btn jellyjump-btn-secondary copy-all-btn flex items-center gap-xs" title="Copy All Info">
                <svg width="16" height="16" fill="currentColor">
                    <use href="assets/icons/sprite.svg#icon-copy"></use>
                </svg>
                <span>Copy All</span>
            </button>
        </div>
    </div>
</template>