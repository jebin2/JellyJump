import{IndexedDBService}from"./IndexedDBService.js";export class PlaylistStorage{static async loadPlaylist(){const e=new IndexedDBService;try{const t=await e.loadPlaylist();return{items:t||[],playbackState:await e.loadPlaybackState()||null}}catch(e){return console.error("Error loading playlist:",e),{items:[],playbackState:null}}}static savePlaylist(e,t,a=0){const i=new IndexedDBService;i.savePlaylist(e);const l=e[t];l&&i.savePlaybackState({index:t,activeId:l.id,time:a})}static savePlaybackProgress(e,t,a){if(!e)return;(new IndexedDBService).savePlaybackState({index:t,activeId:e.id,time:a});try{const t={videoIdentifier:e.id,timestamp:a,savedAt:(new Date).toISOString()};localStorage.setItem(`jellyjump-state-${e.id}`,JSON.stringify(t))}catch(e){console.warn("Failed to sync state to localStorage:",e)}}static async clearStorage(){const e=new IndexedDBService;await e.clearPlaylist()}}