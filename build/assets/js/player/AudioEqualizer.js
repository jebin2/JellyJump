export class AudioEqualizer{constructor(t){this.audioContext=t,this.isInitialized=!1,this.bands={bass:0,mid:0,treble:0},this.bassFilter=null,this.midFilter=null,this.trebleFilter=null,this.presets={flat:{bass:0,mid:0,treble:0},"bass-boost":{bass:8,mid:0,treble:0},"treble-boost":{bass:0,mid:0,treble:8},voice:{bass:-4,mid:6,treble:2},rock:{bass:6,mid:-2,treble:4},electronic:{bass:8,mid:2,treble:6},acoustic:{bass:2,mid:0,treble:4}}}init(){return this.isInitialized||(this.bassFilter=this.audioContext.createBiquadFilter(),this.bassFilter.type="lowshelf",this.bassFilter.frequency.value=60,this.bassFilter.gain.value=this.bands.bass,this.midFilter=this.audioContext.createBiquadFilter(),this.midFilter.type="peaking",this.midFilter.frequency.value=1e3,this.midFilter.Q.value=1,this.midFilter.gain.value=this.bands.mid,this.trebleFilter=this.audioContext.createBiquadFilter(),this.trebleFilter.type="highshelf",this.trebleFilter.frequency.value=14e3,this.trebleFilter.gain.value=this.bands.treble,this.bassFilter.connect(this.midFilter),this.midFilter.connect(this.trebleFilter),this.isInitialized=!0),this.bassFilter}getOutputNode(){return this.trebleFilter}getInputNode(){return this.bassFilter}setBass(t){this.bands.bass=Math.max(-12,Math.min(12,t)),this.bassFilter&&(this.bassFilter.gain.value=this.bands.bass)}setMid(t){this.bands.mid=Math.max(-12,Math.min(12,t)),this.midFilter&&(this.midFilter.gain.value=this.bands.mid)}setTreble(t){this.bands.treble=Math.max(-12,Math.min(12,t)),this.trebleFilter&&(this.trebleFilter.gain.value=this.bands.treble)}applyPreset(t){const e=this.presets[t];e&&(this.setBass(e.bass),this.setMid(e.mid),this.setTreble(e.treble))}reset(){this.applyPreset("flat")}getState(){return{...this.bands}}isActive(){return 0!==this.bands.bass||0!==this.bands.mid||0!==this.bands.treble}}