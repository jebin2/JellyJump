function formatVTTTime(t){const r=Math.floor(t/3600),n=Math.floor(t%3600/60),e=(t%60).toFixed(3);return`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}:${e.padStart(6,"0")}`}export function jsonToVTT(t,r={}){const{wordsPerCue:n=8,maxCueDuration:e=5}=r;if(!Array.isArray(t)||0===t.length)return"WEBVTT\n\n";let o="WEBVTT\n\n",a=0;for(;a<t.length;){const r=[],s=t[a];let i=s;for(;a<t.length&&r.length<n&&t[a].end-s.start<=e;)r.push(t[a]),i=t[a],a++;if(0===r.length&&a<t.length&&(r.push(t[a]),i=t[a],a++),r.length>0){o+=`${formatVTTTime(r[0].start)} --\x3e ${formatVTTTime(i.end)}\n`,o+=`${r.map(t=>t.word).join(" ")}\n\n`}}return o}export function parseTranscriptJSON(t){const r=JSON.parse(t);if(Array.isArray(r))return r;if(r.words)return r.words;if(r.segments)return r.segments.flatMap(t=>t.words||[]);throw new Error("Invalid transcript format: expected array or object with words/segments property")}export async function loadJSONTranscript(t,r={}){const n=await fetch(t);return jsonToVTT(parseTranscriptJSON(await n.text()),r)}