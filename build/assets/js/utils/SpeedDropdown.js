export class SpeedDropdown{static init({button:t,menu:e,onChange:s,initialSpeed:a=1}){const n=e.querySelectorAll(".jellyjump-menu-item");let o=a;return t.addEventListener("click",s=>{s.stopPropagation();const a=t.getBoundingClientRect();e.style.top=`${a.bottom+4}px`,e.style.left=`${a.left}px`,e.classList.toggle("visible")}),n.forEach(a=>{a.addEventListener("click",i=>{i.stopPropagation();const l=parseFloat(a.dataset.value);o=l,t.textContent=a.textContent,n.forEach(t=>t.classList.remove("active")),a.classList.add("active"),e.classList.remove("visible"),s&&s(l,a.textContent)})}),document.addEventListener("click",()=>{e.classList.remove("visible")}),{getCurrentSpeed:()=>o,setDisabled:e=>{t.disabled=e},reset:()=>{o=a,t.textContent=n[3]?.textContent||"1x",n.forEach(t=>{t.classList.toggle("active",parseFloat(t.dataset.value)===a)})}}}}